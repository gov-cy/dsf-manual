<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">UNIT TESTING - A SHORT GUIDE | Digital Services Factory Manual ðŸ˜Ž</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://gov-cy.github.io/dsf-manual/ways-of-working/unit-tests"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="UNIT TESTING - A SHORT GUIDE | Digital Services Factory Manual ðŸ˜Ž"><meta data-react-helmet="true" name="description" content="Unit testing (UT) involves the development of the smallest possible tests which eventually ensure the integrity of the SUT"><meta data-react-helmet="true" property="og:description" content="Unit testing (UT) involves the development of the smallest possible tests which eventually ensure the integrity of the SUT"><link data-react-helmet="true" rel="icon" href="/dsf-manual/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://gov-cy.github.io/dsf-manual/ways-of-working/unit-tests"><link data-react-helmet="true" rel="alternate" href="https://gov-cy.github.io/dsf-manual/ways-of-working/unit-tests" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://gov-cy.github.io/dsf-manual/ways-of-working/unit-tests" hreflang="x-default"><link rel="stylesheet" href="/dsf-manual/assets/css/styles.1c3e8c79.css">
<link rel="preload" href="/dsf-manual/assets/js/runtime~main.982edb88.js" as="script">
<link rel="preload" href="/dsf-manual/assets/js/main.a69acc1d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dsf-manual/"><div class="navbar__logo"><img src="/dsf-manual/img/logo.svg" alt="Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/dsf-manual/img/logo.svg" alt="Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">DSF Manual</b></a><a class="navbar__item navbar__link navbar__link--active" href="/dsf-manual/">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/gov-cy/dsf-manual" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dsf-manual/">Digital Services Factory Team Manual</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/dsf-manual/govcy-design-system/documentation">Govcy Design System</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/dsf-manual/kubernetes">Infrastructure</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/dsf-manual/tech-team-principles">Ways of Working</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dsf-manual/tech-team-principles">DSF Principles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dsf-manual/ways-of-working/code-review">Code Review</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dsf-manual/ways-of-working/git-flow">Team&#x27;s flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dsf-manual/ways-of-working/percy">Percy Visual Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dsf-manual/ways-of-working/developerworkflow">End-to-end developer workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/dsf-manual/ways-of-working/unit-tests">UNIT TESTING - A SHORT GUIDE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dsf-manual/ways-of-working/ucdtechcollab">UCD Tech collaboration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/dsf-manual/services/child-birth-grant">Services</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="theme-doc-markdown markdown"><header><h1>UNIT TESTING - A SHORT GUIDE</h1></header><p>Unit testing (UT) involves the development of the smallest possible tests which eventually ensure the integrity of the SUT
(System Under Test). For example tests include checking that the produced html is the expected one or ensuring that Ï„he
clicking of buttons result in an expected behavior. In unit testing we are not usually concerned in getting real results
from databases, APIs etc. That type of testing is called Integration Testing (I&amp;T). When we are dealing with integrating the application with other software components like APIs , browser storage, authorization and others we usually do what is called as mocking the behavior of those functionalities. As an example of UT see the following: </p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    [Fact]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void GovCy_Button_Check_Functionality()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        using var ctx = new TestContext();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var cut = ctx.Render(@&lt;Govcy_Button ButtonTetxt = &quot;Press&quot; ButtonType = &quot;submit&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var buttonElement = cut.Find(&quot;button&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Assert.Equal(1, cut.RenderCount);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The above test ensures that the button element in the DSF made Blazor component &lt;GovCy_Button&gt;  is indeed  a submit button. This makes sure that in future when a developer either by accident or by design changes the button type, the change will be documented as the UT will flag this as a failed test.
Another example of UT is shown below:  </p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">[Fact]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void  MobileService_Mock_Http_Check_02()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var httpMessageHandlerMock = new Mock&lt;HttpMessageHandler&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpResponseMessage httpResponseMessage = new()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Content = JsonContent.Create(new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Succeeded = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        httpMessageHandlerMock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .Protected()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .Setup&lt;Task&lt;HttpResponseMessage&gt;&gt;(&quot;SendAsync&quot;, ItExpr.IsAny&lt;HttpRequestMessage&gt;(), ItExpr.IsAny&lt;CancellationToken&gt;())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .ReturnsAsync(httpResponseMessage);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var httpClient = new HttpClient(httpMessageHandlerMock.Object)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            BaseAddress = new Uri(&quot;https://dsf-api-dev.dmrid.gov.cy/api/v1/&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CheckMobile checkMobile = new (httpClient);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var result =  checkMobile.IsMobileNumberValid(&quot;99314344&quot;, true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Assert.True( Convert.ToBoolean( result));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Here we are mocking the behavior of an HttpClient API call.  This is essential since in UT we should not be concerned in calling the real API and even sometimes we will have no access to the API . Testing real APIs is done in Integration  Testing.
DSF has setup the UT infrastructure as found in the updated solution structure in GitHub (govcy-blazor-repo). Unit tests are developed in a separate project in the same solution as the SUT in Visual Studio or VS Code.<br>
<!-- -->The following frameworks were used to develop the UT infrastructure:</p><ol><li><strong>BUnit</strong> â€“ A framework specifically designed for the .net Blazor framework. </li><li><strong>XUnit</strong> â€“ A base testing framework required for BUnit to work.</li><li><strong>FakeItEasy</strong>â€“ A mocking framework to mock services like http calls, browser storage etc.</li></ol><p>It is emphasized here that UT will be written by the developer each time a change is made in the application. It has been agreed that the developer implementing the change in the application will be also responsible implementing the UT.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/gov-cy/dsf-manual/tree/main/src/docs/Ways of Working/unit-tests.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/dsf-manual/ways-of-working/developerworkflow"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">End-to-end developer workflow</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/dsf-manual/ways-of-working/ucdtechcollab"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">UCD Tech collaboration</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/dsf-manual/">Home</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/gov-cy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GOV.CY GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2022 Digital Services Factory Team - Republic of Cyprus.</div></div></div></footer></div>
<script src="/dsf-manual/assets/js/runtime~main.982edb88.js"></script>
<script src="/dsf-manual/assets/js/main.a69acc1d.js"></script>
</body>
</html>