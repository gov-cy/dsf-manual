"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[371],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=o,f=d["".concat(l,".").concat(h)]||d[h]||p[h]||i;return n?r.createElement(f,a(a({ref:t},u),{},{components:n})):r.createElement(f,a({ref:t},u))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var c=2;c<i;c++)a[c]=n[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},52:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return u},default:function(){return d}});var r=n(7462),o=n(3366),i=(n(7294),n(3905)),a=["components"],s={sidebar_position:6,slug:"/ways-of-working/unit-tests"},l="UNIT TESTING - A SHORT GUIDE",c={unversionedId:"Ways of Working/unit-tests",id:"Ways of Working/unit-tests",title:"UNIT TESTING - A SHORT GUIDE",description:"Unit testing (UT) involves the development of the smallest possible tests which eventually ensure the integrity of the SUT",source:"@site/src/docs/Ways of Working/unit-tests.md",sourceDirName:"Ways of Working",slug:"/ways-of-working/unit-tests",permalink:"/dsf-manual/ways-of-working/unit-tests",editUrl:"https://github.com/gov-cy/dsf-manual/tree/main/src/docs/Ways of Working/unit-tests.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,slug:"/ways-of-working/unit-tests"},sidebar:"tutorialSidebar",previous:{title:"End-to-end developer workflow",permalink:"/dsf-manual/ways-of-working/developerworkflow"},next:{title:"UCD Tech collaboration",permalink:"/dsf-manual/ways-of-working/ucdtechcollab"}},u=[],p={toc:u};function d(e){var t=e.components,n=(0,o.Z)(e,a);return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"unit-testing---a-short-guide"},"UNIT TESTING - A SHORT GUIDE"),(0,i.kt)("p",null,"Unit testing (UT) involves the development of the smallest possible tests which eventually ensure the integrity of the SUT\n(System Under Test). For example tests include checking that the produced html is the expected one or ensuring that \u03c4he\nclicking of buttons result in an expected behavior. In unit testing we are not usually concerned in getting real results\nfrom databases, APIs etc. That type of testing is called Integration Testing (I&T). When we are dealing with integrating the application with other software components like APIs , browser storage, authorization and others we usually do what is called as mocking the behavior of those functionalities. As an example of UT see the following: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'    [Fact]\n    public void GovCy_Button_Check_Functionality()\n    {\n        using var ctx = new TestContext();\n        var cut = ctx.Render(@<Govcy_Button ButtonTetxt = "Press" ButtonType = "submit" />\n\n    );\n        var buttonElement = cut.Find("button");\n        Assert.Equal(1, cut.RenderCount);\n    }\n\n')),(0,i.kt)("p",null,"The above test ensures that the button element in the DSF made Blazor component <GovCy_Button>  is indeed  a submit button. This makes sure that in future when a developer either by accident or by design changes the button type, the change will be documented as the UT will flag this as a failed test.\nAnother example of UT is shown below:  "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'[Fact]\n    public void  MobileService_Mock_Http_Check_02()\n    {\n\n        var httpMessageHandlerMock = new Mock<HttpMessageHandler>();\n\n        HttpResponseMessage httpResponseMessage = new()\n            {\n\n                Content = JsonContent.Create(new\n                {\n                    Succeeded = true\n                })\n\n        };\n\n\n        httpMessageHandlerMock\n        .Protected()\n        .Setup<Task<HttpResponseMessage>>("SendAsync", ItExpr.IsAny<HttpRequestMessage>(), ItExpr.IsAny<CancellationToken>())\n        .ReturnsAsync(httpResponseMessage);\n\n        var httpClient = new HttpClient(httpMessageHandlerMock.Object)\n        {\n            BaseAddress = new Uri("https://dsf-api-dev.dmrid.gov.cy/api/v1/")\n        };\n\n        CheckMobile checkMobile = new (httpClient);\n\n        var result =  checkMobile.IsMobileNumberValid("99314344", true);\n\n        Assert.True( Convert.ToBoolean( result));\n\n\n    }\n')),(0,i.kt)("p",null,"Here we are mocking the behavior of an HttpClient API call.  This is essential since in UT we should not be concerned in calling the real API and even sometimes we will have no access to the API . Testing real APIs is done in Integration  Testing.\nDSF has setup the UT infrastructure as found in the updated solution structure in GitHub (govcy-blazor-repo). Unit tests are developed in a separate project in the same solution as the SUT in Visual Studio or VS Code.",(0,i.kt)("br",{parentName:"p"}),"\n","The following frameworks were used to develop the UT infrastructure:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"BUnit")," \u2013 A framework specifically designed for the .net Blazor framework. "),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"XUnit")," \u2013 A base testing framework required for BUnit to work."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"FakeItEasy"),"\u2013 A mocking framework to mock services like http calls, browser storage etc.")),(0,i.kt)("p",null,"It is emphasized here that UT will be written by the developer each time a change is made in the application. It has been agreed that the developer implementing the change in the application will be also responsible implementing the UT."))}d.isMDXComponent=!0}}]);