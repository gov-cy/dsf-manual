"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[950],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=c(n),d=i,h=p["".concat(s,".").concat(d)]||p[d]||m[d]||r;return n?a.createElement(h,l(l({ref:t},u),{},{components:n})):a.createElement(h,l({ref:t},u))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=p;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var c=2;c<r;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},7980:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return s},default:function(){return p},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return u}});var a=n(7462),i=n(3366),r=(n(7294),n(3905)),l=["components"],o={sidebar_position:4,slug:"/ways-of-working/git-flow"},s="Team's flow",c={unversionedId:"Ways of Working/git",id:"Ways of Working/git",title:"Team's flow",description:"This document describes the Team's git wokflow. It is bases on the GitHub workflow.",source:"@site/src/docs/Ways of Working/git.md",sourceDirName:"Ways of Working",slug:"/ways-of-working/git-flow",permalink:"/dsf-manual/ways-of-working/git-flow",editUrl:"https://github.com/gov-cy/dsf-manual/tree/main/src/docs/Ways of Working/git.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,slug:"/ways-of-working/git-flow"},sidebar:"tutorialSidebar",previous:{title:"Code Review",permalink:"/dsf-manual/ways-of-working/code-review"},next:{title:"Percy Visual Testing",permalink:"/dsf-manual/ways-of-working/percy"}},u=[{value:"Prerequisites",id:"prerequisites",children:[{value:"(Recommended) Install node.js and git",id:"recommended-install-nodejs-and-git",children:[],level:3},{value:"Clone repository",id:"clone-repository",children:[],level:3},{value:"Install Dependencies",id:"install-dependencies",children:[],level:3}],level:2},{value:"Workflow",id:"workflow",children:[{value:"1. Create a branch",id:"1-create-a-branch",children:[],level:3},{value:"2. Make changes",id:"2-make-changes",children:[],level:3},{value:"3. Pull request",id:"3-pull-request",children:[],level:3},{value:"4. Review and Approve Pull Request",id:"4-review-and-approve-pull-request",children:[],level:3},{value:"5. Merge",id:"5-merge",children:[],level:3},{value:"6. Delete Branch",id:"6-delete-branch",children:[],level:3}],level:2},{value:"Best Practice",id:"best-practice",children:[],level:2},{value:"Github Policy",id:"github-policy",children:[],level:2},{value:"Github Various Commands",id:"github-various-commands",children:[],level:2},{value:"Rebasing and Conflicts",id:"rebasing-and-conflicts",children:[{value:"Rebasing",id:"rebasing",children:[],level:3}],level:2},{value:"For more information check this guide from Atlassian",id:"for-more-information-check-this-guide-from-atlassian",children:[{value:"Conflicts",id:"conflicts",children:[],level:3}],level:2},{value:"For more information check this guide from Atlassian",id:"for-more-information-check-this-guide-from-atlassian-1",children:[],level:2}],m={toc:u};function p(e){var t=e.components,n=(0,i.Z)(e,l);return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"teams-flow"},"Team's flow"),(0,r.kt)("p",null,"This document describes the Team's git wokflow. It is bases on the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.github.com/en/get-started/quickstart/github-flow"},"GitHub workflow"),"."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("h3",{id:"recommended-install-nodejs-and-git"},"(Recommended) Install node.js and git"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Install ",(0,r.kt)("a",{parentName:"li",href:"https://git-scm.com/book/en/v2/Getting-Started-Installing-Git"},"git")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"If required")," by the project Install ",(0,r.kt)("a",{parentName:"li",href:"https://nodejs.org/en/download/"},"Note.js"))),(0,r.kt)("h3",{id:"clone-repository"},"Clone repository"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Get repository URL. From the repository page on Github, click ",(0,r.kt)("inlineCode",{parentName:"li"},"Code")," and copy URL."),(0,r.kt)("li",{parentName:"ul"},"Clone locally. (downloads repository)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Command line")," ",(0,r.kt)("inlineCode",{parentName:"li"},"git clone URL")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"VSCode")," use ",(0,r.kt)("inlineCode",{parentName:"li"},"clone repository"))))),(0,r.kt)("h3",{id:"install-dependencies"},"Install Dependencies"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"If required")," by the project, update npm dependencies locally (on your computer)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Command line"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"npm install"))),(0,r.kt)("h2",{id:"workflow"},"Workflow"),(0,r.kt)("h3",{id:"1-create-a-branch"},"1. Create a branch"),(0,r.kt)("p",null,"First you are going to need to create a branch in your repository. To do this you need to pick a name for your branch. Use your name initials and a short, descriptive branch name enables your collaborators to see ongoing work at a glance. For example, ",(0,r.kt)("inlineCode",{parentName:"p"},"CE-increase-test-timeout")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"NR-add-code-of-conduct")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Make sure you are in ",(0,r.kt)("inlineCode",{parentName:"li"},"main")," branch and ",(0,r.kt)("inlineCode",{parentName:"li"},"pull")," from remote. ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"command line"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"git pull")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"VSCore"),": click on ",(0,r.kt)("inlineCode",{parentName:"li"},"\u267b")," icon under ",(0,r.kt)("inlineCode",{parentName:"li"},"source control")))),(0,r.kt)("li",{parentName:"ul"},"Create a new local branch",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"command line"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"git checkout -b \uff1cnew-branch\uff1e")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"vscode"),": click on ",(0,r.kt)("inlineCode",{parentName:"li"},"main")," (bottom left) under ",(0,r.kt)("inlineCode",{parentName:"li"},"source control")," and then click on ",(0,r.kt)("inlineCode",{parentName:"li"},"create new branch "),". ")))),(0,r.kt)("h3",{id:"2-make-changes"},"2. Make changes"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Make change in files",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"vscode"),": When a change is saved, all changes under that branch is displayed under  ",(0,r.kt)("inlineCode",{parentName:"li"},"Source Control")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"command line"),": You can see changes with ",(0,r.kt)("inlineCode",{parentName:"li"},"git status")))),(0,r.kt)("li",{parentName:"ul"},"Add files to stage (locally) ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"command line"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"git add <file>")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"git add <directory>")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"git add .")," to add all changes"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"vscode"),": use the ",(0,r.kt)("inlineCode",{parentName:"li"},"+")," icon under ",(0,r.kt)("inlineCode",{parentName:"li"},"Source control")))),(0,r.kt)("li",{parentName:"ul"},"Commit changes.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"command line"),": ",(0,r.kt)("inlineCode",{parentName:"li"},'git commit -m "commit message"')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"vscode"),": click the ",(0,r.kt)("inlineCode",{parentName:"li"},"\u2713")," icon under ",(0,r.kt)("inlineCode",{parentName:"li"},"commit")," in ",(0,r.kt)("inlineCode",{parentName:"li"},"source control")))),(0,r.kt)("li",{parentName:"ul"},"Push changes. ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Command line"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"git push")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"vscode"),": Click ",(0,r.kt)("inlineCode",{parentName:"li"},"Publish Changes"),"in ",(0,r.kt)("inlineCode",{parentName:"li"},"source control"))))),(0,r.kt)("p",null,"Changes are done now in remote repository. Next step you need to create a pull request."),(0,r.kt)("h3",{id:"3-pull-request"},"3. Pull request"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In github and check ",(0,r.kt)("inlineCode",{parentName:"li"},"Branches"),"  (i.e. ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/gov-cy/dsf-design-system/branches"},"https://github.com/gov-cy/dsf-design-system/branches")," )  and select your branch"),(0,r.kt)("li",{parentName:"ul"},"Create a ",(0,r.kt)("inlineCode",{parentName:"li"},"Pull request"),". Add a meaningful comment")),(0,r.kt)("h3",{id:"4-review-and-approve-pull-request"},"4. Review and Approve Pull Request"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Another member team needs to review and ",(0,r.kt)("inlineCode",{parentName:"li"},"approve")," the pull request on github. Use meaningful comments on review.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Check ",(0,r.kt)("a",{parentName:"li",href:"percy#github-review-builds"},"Visual Review with Percy"))))),(0,r.kt)("h3",{id:"5-merge"},"5. Merge"),(0,r.kt)("p",null,"If the change is approved, the developer who made the changes in the first place has to ",(0,r.kt)("inlineCode",{parentName:"p"},"merge"),"."),(0,r.kt)("h3",{id:"6-delete-branch"},"6. Delete Branch"),(0,r.kt)("p",null,"After you merge your pull request, delete your branch. This indicates that the work on the branch is complete and prevents you or others from accidentally using old branches. For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://docs.github.com/en/github/administering-a-repository/deleting-and-restoring-branches-in-a-pull-request"},"Deleting and restoring branches in a pull request"),"."),(0,r.kt)("h2",{id:"best-practice"},"Best Practice"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Delete local branch after each merge"),(0,r.kt)("li",{parentName:"ul"},"Create new branch for new changes. I.e. different branch for ",(0,r.kt)("inlineCode",{parentName:"li"},"jumbotron")," changes and different branch for ",(0,r.kt)("inlineCode",{parentName:"li"},"button")," changes."),(0,r.kt)("li",{parentName:"ul"},"Branch naming: Developer_Initials-Feaure i.e. : ",(0,r.kt)("inlineCode",{parentName:"li"},"CE_button_styles")),(0,r.kt)("li",{parentName:"ul"},"For commits always have a descriptive, meaningful small message"),(0,r.kt)("li",{parentName:"ul"},"Make small changes and quick commits and pushes to remote")),(0,r.kt)("h2",{id:"github-policy"},"Github Policy"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Default branch is ",(0,r.kt)("inlineCode",{parentName:"li"},"main")),(0,r.kt)("li",{parentName:"ul"},"Production branch is ",(0,r.kt)("inlineCode",{parentName:"li"},"main")),(0,r.kt)("li",{parentName:"ul"},"Protection rules for branch ",(0,r.kt)("inlineCode",{parentName:"li"},"main"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Require a pull request before merging"),(0,r.kt)("li",{parentName:"ul"},"Require approvals")))),(0,r.kt)("h2",{id:"github-various-commands"},"Github Various Commands"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"git checkout <existing_branch>")," Switch to existing Branch"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"git checkout -b <new_branch>")," Switch to new Branch"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"git branch -a")," display all branches (both local and remote)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"git branch")," To see local branches"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"git branch -d <branch-name> ")," To delete local branch. If the branch contains unmerged changes, though, Git will refuse to delete it. If you\u2019re sure you want to do it, you\u2019ll have to force the deletion by replacing the -d parameter with an uppercase D")),(0,r.kt)("h2",{id:"rebasing-and-conflicts"},"Rebasing and Conflicts"),(0,r.kt)("h3",{id:"rebasing"},"Rebasing"),(0,r.kt)("p",null,"Remember to think about a git repository as a ",(0,r.kt)("em",{parentName:"p"},"series of changes"),"."),(0,r.kt)("p",null,"When you create a new branch git makes a copy of 'main' and you start putting changes on top of it."),(0,r.kt)("p",null,"But what if someone else puts more changes onto 'main'? The copy of main you are putting changes on top of is out of date."),(0,r.kt)("p",null,"To update the copy of main that is underneath our changes we perform a rebase."),(0,r.kt)("p",null,"First we update out main locally as usual:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"git checkout main\ngit pull\n")),(0,r.kt)("p",null,"then we go to our branch and rebase:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"git checkout my-cool-branch\ngit rebase main\n")),(0,r.kt)("p",null,"Done!"),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NOTE")),(0,r.kt)("h2",{id:"for-more-information-check-this-guide-from-atlassian"},"For more information check this ",(0,r.kt)("a",{parentName:"h2",href:"https://www.atlassian.com/git/tutorials/merging-vs-rebasing"},"guide from Atlassian")),(0,r.kt)("h3",{id:"conflicts"},"Conflicts"),(0,r.kt)("p",null,"But..."),(0,r.kt)("p",null,"Sometimes there will be conflicts with you changes and the new changes in main. ",(0,r.kt)("strong",{parentName:"p"},"Don't Panic.")),(0,r.kt)("p",null,"You should get a message like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'You have unmerged paths.\n(fix conflicts and run "git commit")\n(use "git rebase --abort" to abort the rebase)\n\nUnmerged paths:\n(use "git add <file>..." to mark resolution)\n\nboth modified:   test.txt\n')),(0,r.kt)("p",null,"The first thing this tells you is you can always cancel the rebase. If you run ",(0,r.kt)("inlineCode",{parentName:"p"},"git rebase --abort")," you will be back with your branch before you tried to rebase the changes from main."),(0,r.kt)("p",null,"It also tells you how to fix the problem:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'> both modified:   test.txt\n> use "git add <file>..." to mark resolution\n> fix conflicts and run "git commit"\n')),(0,r.kt)("p",null,"In our example the file with a conflict is ",(0,r.kt)("inlineCode",{parentName:"p"},"test.txt"),". In that file you will see more info:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ cat test.txt\n<<<<<<< HEAD\nthe changes from my branch\n=======\nthe changes from main\n>>>>>>> main\n")),(0,r.kt)("p",null,"All you need to do now is to get test.txt how you want it then:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"git add test.txt\ngit commit -m 'Resolving conflict in test.txt' test.txt\ngit rebase --continue\n")),(0,r.kt)("p",null,"Done!"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NOTE")),(0,r.kt)("h2",{id:"for-more-information-check-this-guide-from-atlassian-1"},"For more information check this ",(0,r.kt)("a",{parentName:"h2",href:"https://www.atlassian.com/git/tutorials/using-branches/merge-conflicts"},"guide from Atlassian")))}p.isMDXComponent=!0}}]);